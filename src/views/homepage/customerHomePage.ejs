<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer</title>
    <%- include('../partials/head.ejs'); %>
</head>

<body>

    <header class="p-3 bg-dark text-white">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
              <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
            </a>
    
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">

            </ul>
    
    
            <div class="text-end">
              <a type="button" class="btn btn-outline-light me-2"  href="/">Home</a>
              <a type="button" class="btn btn-warning" href="/log-out">Sign Out</a>
            </div>
          </div>
        </div>
      </header>
    
        <div class="container">
            <br>

            <div class="row">
                <div class="col-md">
                    <div class="card card-body">
                        <% if (customer.gender=='M' ) { %>
                            <h5>Customer: Mr <%= customer.fullname %>
                            </h5>
                            <% } else { %>
                                <h5>Customer: Mrs <%= customer.fullname %>
                                </h5>
                                <% } %>
                                    <hr>

                                    <p>Email: <%= customer.email %>
                                    </p>
                                    <p>Phone: <%= customer.phonenumber %>
                                    </p>
                                    <p>Address: <%= customer.address %>
                                    </p>
                                    <button class="btn btn-info  btn-sm btn-block mb-3" data-bs-toggle="modal"
                                        data-bs-target="#myModal">Update Customer</button>
                        
                    </div>
                </div>
                <%- include('updateCustomer.ejs'); %>

                <div class="col-md" >
                    <div class="card card-body bg-light" style="padding-bottom: 30px !important;">
                        <h5 class="text-center">Total Orders</h5>
                        <hr>
                        <% if(order) { %>
                            <h1 class="text-center p-3" style="font-size: 5.5rem;">
                                <%= order.length %>
                            </h1>

                        <% } %>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-md">
                    <div class="card card-body">
                        <table class="table table-sm">

                            <tr>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Total</th>
                                <th>Date Ordered</th>
                                <th>Status</th>
                                <th>Cancel Order</th>
                            </tr>
                            <% for (let i=0; i < order.length; i++) { %>
                                <tr>

                                    <td>
                                        <%= order[i].productData.name %>
                                    </td>
                                    <td>
                                        <%= order[i].quantity%>
                                    </td>
                                    <td>
                                        <%= order[i].total%>
                                    </td>
                                    <td>
                                        <%= order[i].createdAt %>
                                    </td>
                                    <td>
                                        <%= order[i].orderStatusData.value %>
                                    </td>
                                
                                    <td><a class="btn btn-sm btn-danger"
                                            href="/delete-order-in-customer-home?id=<%=order[i].id%>&cusId=<%=  customer.id %>">Cancel
                                    </td>


                                </tr>
                                <% } %>



                        </table>
                    </div>
                </div>
            </div>


        </div>
</body>

</html>